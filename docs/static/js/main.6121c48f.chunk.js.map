{"version":3,"sources":["components/Search/Search.tsx","components/MainPage/ProductCard/ProductCard.tsx","components/MainPage/MainPage.tsx","components/Admin/StatusCheckbox/StatusCheckbox.tsx","components/ImageInput/ImageInput.tsx","config.ts","middleware.ts","components/Admin/Product/AdminProduct.tsx","components/Admin/AddForm/AddForm.tsx","components/Admin/Auth/Auth.tsx","components/Admin/Admin.tsx","components/Cart/Product/CartProduct.tsx","components/Cart/Cart.tsx","components/Header/Header.tsx","components/Loader/Loader.tsx","components/Error/Error.tsx","App.tsx","reportWebVitals.ts","i18n.ts","index.tsx"],"names":["Search","inputEmitter","t","useTranslation","className","icon","faSearch","onChange","event","target","value","ProductCard","item_name","price","id","picture","is_available","addToCart","src","alt","onClick","faCartPlus","MainPage","cart","setCart","cartCount","setCartCount","products","useState","search","setSearch","stringId","toString","document","cookie","JSON","stringify","productsItems","filter","item","toLowerCase","includes","sort","a","b","map","i","croppedValue","trim","length","columnClassName","breakpointCols","default","1500","700","500","StatusCheckbox","available","setAvailable","ImageInput","initialSrc","setImage","imageElement","useRef","ref","type","onInput","reader","FileReader","readAsDataURL","nativeEvent","files","onloadend","strImage","result","alert","current","config","key","name","token","request","login","username","password","body","add","product","update","deleteItem","method","path","defaultReturn","fetch","headers","Authorization","response","ok","Promise","resolve","json","AdminProduct","setProducts","idx","setError","editMode","setEditMode","image","nameInput","priceInput","parseInt","updatedProduct","placeholder","defaultValue","faEdit","faTimesCircle","AddForm","setAddOpened","newProduct","Auth","setToken","loginInput","passwordInput","history","useHistory","autoFocus","push","Admin","addOpened","CartProduct","amount","changeCart","faMinusSquare","faPlusSquare","Cart","cartList","setCartList","cartProducts","Object","keys","faShoppingCart","reduce","prev","curr","currProduct","find","Header","authToken","i18n","languages","e","lang","changeLanguage","language","Loader","viewBox","cx","cy","r","strokeWidth","fill","strokeDasharray","Error","message","show","App","tokenExpr","match","slice","getToken","data","count","cartData","parsedData","parse","values","getCart","error","loaded","setLoaded","useEffect","loadProducts","then","exact","render","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","resources","en","translation","ru","use","initReactI18next","init","lng","cookieLang","navLang","navigator","split","getCurrentLanguage","keySeparator","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6121c48f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Search.css\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\ninterface SearchProps {\r\n  inputEmitter: (value: string) => void;\r\n}\r\n\r\nexport function Search({ inputEmitter }: SearchProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <span className=\"search__title\">\r\n        <FontAwesomeIcon icon={faSearch} />\r\n        &nbsp;&nbsp;{t(\"search\")}\r\n      </span>\r\n\r\n      <input className=\"search__field\" onChange={event => inputEmitter(event.target.value)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./ProductCard.css\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { faCartPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { ProductWithId } from \"../../../data/shared\";\r\n\r\ninterface ProductCardProps extends ProductWithId {\r\n  addToCart: (id: number) => void;\r\n}\r\n\r\nexport function ProductCard({\r\n  item_name,\r\n  price,\r\n  id,\r\n  picture,\r\n  is_available,\r\n  addToCart,\r\n}: ProductCardProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card__content\">\r\n        <img src={picture} className=\"card__image\" alt=\"\" />\r\n        <div className=\"card__name\">{item_name}</div>\r\n        <div className=\"card__price\">{price} ₽</div>\r\n\r\n        {!is_available && <div className=\"card__availability\">{t(\"product.not_available\")}</div>}\r\n      </div>\r\n\r\n      {is_available && (\r\n        <div className=\"card__add\">\r\n          <FontAwesomeIcon onClick={() => addToCart(id)} className=\"card__cart\" icon={faCartPlus} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Masonry from \"react-masonry-css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport \"./MainPage.css\";\r\nimport { Search } from \"../Search/Search\";\r\nimport { ProductCard } from \"./ProductCard/ProductCard\";\r\nimport { ProductWithId, CartType } from \"../../data/shared\";\r\n\r\ninterface MainPageProps {\r\n  cart: CartType;\r\n  setCart: React.Dispatch<React.SetStateAction<CartType>>;\r\n  cartCount: number;\r\n  setCartCount: React.Dispatch<React.SetStateAction<number>>;\r\n  products: ProductWithId[];\r\n  setProducts: (list: ProductWithId[]) => void;\r\n}\r\n\r\nexport function MainPage({\r\n  cart,\r\n  setCart,\r\n  cartCount,\r\n  setCartCount,\r\n  products,\r\n}: MainPageProps) {\r\n  const { t } = useTranslation();\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  function onSearchInput(value: string): void {\r\n    const croppedValue = value.trim().toLowerCase();\r\n    setSearch(croppedValue);\r\n  }\r\n\r\n  function addToCart(id: number): void {\r\n    const stringId = id.toString();\r\n    cart[stringId] = cart[stringId] ? cart[stringId] + 1 : 1;\r\n    document.cookie = `cart=${JSON.stringify(cart)}`;\r\n    setCart(cart);\r\n    setCartCount(++cartCount);\r\n  }\r\n\r\n  const productsItems = products\r\n    .filter((item) => item.item_name.toLowerCase().includes(search))\r\n    .sort((a, b) => a.price - b.price)\r\n    .map(({ item_name, price, picture, is_available, id }: ProductWithId, i) => {\r\n      return (\r\n        <ProductCard\r\n          key={i}\r\n          id={id}\r\n          item_name={item_name}\r\n          price={price}\r\n          picture={picture}\r\n          is_available={is_available}\r\n          addToCart={addToCart}\r\n        />\r\n      );\r\n    });\r\n\r\n  const breakpointColumnsObj = {\r\n    default: 4,\r\n    1500: 3,\r\n    700: 2,\r\n    500: 1,\r\n  };\r\n\r\n  return (\r\n    <div className=\"main\">\r\n      <Search inputEmitter={onSearchInput} />\r\n\r\n      <div className=\"content__count\">{t(\"found\")}: {products.length}</div>\r\n\r\n      <Masonry\r\n        columnClassName=\"results__col\"\r\n        className=\"results\"\r\n        breakpointCols={breakpointColumnsObj}\r\n      >\r\n        {productsItems}\r\n      </Masonry>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./StatusCheckbox.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\ninterface StatusCheckboxProps {\r\n  available: boolean;\r\n  setAvailable: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nexport function StatusCheckbox({ available, setAvailable }: StatusCheckboxProps) {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"status\">\r\n      <div\r\n        className={`status__option ${available && \"status__option_selected_green\"}`}\r\n        onClick={() => setAvailable(true)}\r\n      >\r\n        {t(\"product.available\")}\r\n      </div>\r\n      <div\r\n        className={`status__option ${!available && \"status__option_selected_red\"}`}\r\n        onClick={() => setAvailable(false)}\r\n      >\r\n        {t(\"product.not_available\")}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport \"./ImageInput.css\";\r\n\r\ninterface ImageInputProps {\r\n  initialSrc?: string;\r\n  setImage: (im: string) => void;\r\n}\r\n\r\nexport function ImageInput({ initialSrc, setImage }: ImageInputProps) {\r\n  const imageElement: React.MutableRefObject<null | HTMLImageElement> = useRef(null);\r\n\r\n  function updateImage(event: any): void {\r\n    try {\r\n      const reader = new FileReader();\r\n\r\n      reader.readAsDataURL(event.nativeEvent.target.files[0]);\r\n      reader.onloadend = () => {\r\n        const strImage = reader.result as string;\r\n        if (strImage.length > 500000) {\r\n          alert(\"too big image\");\r\n          return;\r\n        }\r\n        setImage(strImage);\r\n        imageElement!.current!.src = strImage;\r\n      };\r\n    } catch {\r\n      return;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"image-input\">\r\n      <img ref={imageElement} src={initialSrc} className=\"image-input__image\" alt=\"\" />\r\n      <input type=\"file\" className=\"image-input__input\" onInput={updateImage} />\r\n    </div>\r\n  );\r\n}\r\n","export const config = {\r\n  name: \"GrinvichParkway\",\r\n  token: \"0d7aa36bb0754d6871a209c75209f6475d3c6907\",\r\n  url: \"https://multitenant-backend.herokuapp.com/shop/\",\r\n  login_time: 30, // minutes\r\n  cart_time: 24, // hours\r\n  languages: [\r\n    {\r\n      key: \"en\",\r\n      name: \"English\",\r\n    },\r\n    {\r\n      key: \"ru\",\r\n      name: \"Русский\",\r\n    }\r\n  ]\r\n};\r\n","import { config } from \"./config\";\r\nimport { Product, ProductWithId } from \"./data/shared\";\r\n\r\nconst token = `Token ${config.token}`;\r\n\r\ntype Method = \"GET\" | \"POST\" | \"DELETE\";\r\n\r\ntype TokenResponse = { token: string };\r\n\r\ntype DeleteResponse = { result: boolean };\r\n\r\nexport async function loadProducts(): Promise<ProductWithId[]> {\r\n  try {\r\n    return await request<ProductWithId[]>(\"GET\", \"products\", []);\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function login(username: string, password: string): Promise<string> {\r\n  try {\r\n    const body = JSON.stringify({ username, password });\r\n    const { token } = await request<TokenResponse>(\"POST\", \"login\", { token: \"\" }, body);\r\n    return token === config.token ? token : \"\";\r\n  } catch (error) {\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport async function add(product: Product): Promise<ProductWithId | null> {\r\n  try {\r\n    const body = JSON.stringify(product);\r\n    return await request<ProductWithId | null>(\"POST\", \"products/create\", null, body);\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function update(product: ProductWithId): Promise<ProductWithId | null> {\r\n  try {\r\n    const body = JSON.stringify(product);\r\n    return await request<ProductWithId | null>(\"POST\",`products/update/${product.id}`, null, body);\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function deleteItem(id: number): Promise<boolean> {\r\n  try {\r\n    const { result } = await request<DeleteResponse>(\"DELETE\", `products/delete/${id}`, { result: false });\r\n    return result;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\nasync function request<T>(method: Method, path: string, defaultReturn: T, body?: string): Promise<T> {\r\n  const response = await fetch(`${config.url}${path}/`, {\r\n    method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: token,\r\n    },\r\n    body,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    return Promise.resolve(defaultReturn);\r\n  }\r\n  return await response.json() as Promise<T>;\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport \"./AdminProduct.css\";\r\nimport \"./Edit.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { ProductWithId } from \"../../../data/shared\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle, faEdit } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { StatusCheckbox } from \"../StatusCheckbox/StatusCheckbox\";\r\nimport { ImageInput } from \"../../ImageInput/ImageInput\";\r\nimport { update, deleteItem } from \"../../../middleware\";\r\n\r\ninterface AdminProductProps extends ProductWithId {\r\n  products: ProductWithId[];\r\n  setProducts: (prod: ProductWithId[]) => void;\r\n  idx: number;\r\n  setError: (message: string) => void;\r\n}\r\n\r\nexport function AdminProduct({\r\n  id,\r\n  item_name,\r\n  price,\r\n  picture,\r\n  is_available,\r\n  products,\r\n  setProducts,\r\n  idx,\r\n  setError\r\n}: AdminProductProps) {\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [available, setAvailable] = useState(is_available);\r\n  const [image, setImage] = useState(picture);\r\n  const nameInput: React.MutableRefObject<null | HTMLInputElement> = useRef(null);\r\n  const priceInput: React.MutableRefObject<null | HTMLInputElement> = useRef(null);\r\n  const { t } = useTranslation();\r\n\r\n  async function updateProduct(): Promise<void> {\r\n    const item_name = nameInput!.current!.value;\r\n    const price = parseInt(priceInput!.current!.value);\r\n    const is_available = available;\r\n    const picture = image;\r\n\r\n    if (!item_name || !picture) {\r\n      setError(t(\"error.fields\"));\r\n      return;\r\n    }\r\n    if (!price) {\r\n      setError(t(\"error.price\"));\r\n      return;\r\n    }\r\n\r\n    const updatedProduct = await update({ id, item_name, price, is_available, picture });\r\n\r\n    if (!updatedProduct) return;\r\n    setProducts(products.map((item, i) => (i === idx ? updatedProduct : item)));\r\n    setEditMode(false);\r\n  }\r\n\r\n  async function deleteProduct(): Promise<void> {\r\n    const result = await deleteItem(id);\r\n\r\n    if (result) {\r\n      setProducts(products.filter(item => item.id !== id));\r\n    }\r\n  }\r\n\r\n  function getNameElement() {\r\n    return editMode ? (\r\n      <input\r\n        className=\"product__input product__name_edit\"\r\n        placeholder={t(\"product.name\")}\r\n        defaultValue={item_name}\r\n        ref={nameInput}\r\n      />\r\n    ) : (\r\n      <div className=\"product__name\">{item_name}</div>\r\n    );\r\n  }\r\n\r\n  function getPriceElement() {\r\n    return editMode ? (\r\n      <input\r\n        ref={priceInput}\r\n        className=\"product__input product__price_edit\"\r\n        defaultValue={price}\r\n        placeholder={t(\"product.price\")}\r\n      />\r\n    ) : (\r\n      <div className=\"product__price\">\r\n        {price} ₽&nbsp;&nbsp;&nbsp;\r\n        {is_available &&\r\n          <span className=\"product__status_available\">{t(\"product.available\")}</span>}\r\n        {!is_available &&\r\n          <span className=\"product__status_not-available\">{t(\"product.not_available\")}</span>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function getImageElement() {\r\n    return editMode ? (\r\n      <ImageInput initialSrc={picture} setImage={setImage} />\r\n    ) : (\r\n      <img className=\"product__image-item\" alt=\"\" src={picture} />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`product ${editMode && \"product_edit\"}`}>\r\n      <div className={`product__image ${editMode && \"product__image_edit\"}`}>\r\n        {getImageElement()}\r\n      </div>\r\n\r\n      <div className={`product__id ${editMode && \"product__id_edit\"}`}>{id}</div>\r\n\r\n      {getNameElement()}\r\n\r\n      {getPriceElement()}\r\n\r\n      {editMode && (\r\n        <div className=\"product__av\">\r\n          <StatusCheckbox available={available} setAvailable={setAvailable} />\r\n        </div>\r\n      )}\r\n\r\n      {editMode && (\r\n        <button className=\"product__save\" onClick={updateProduct}>\r\n          {t(\"product.save\")}\r\n        </button>\r\n      )}\r\n\r\n      <div className=\"product__control\">\r\n        <button className=\"product__control-btn\" onClick={() => setEditMode(!editMode)}>\r\n          <FontAwesomeIcon icon={faEdit} />\r\n        </button>\r\n        <button className=\"product__control-btn product__control-btn_red\" onClick={deleteProduct}>\r\n          <FontAwesomeIcon icon={faTimesCircle} />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport \"./AddForm.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { StatusCheckbox } from \"../StatusCheckbox/StatusCheckbox\";\r\nimport { ImageInput } from \"../../ImageInput/ImageInput\";\r\nimport { add } from \"../../../middleware\";\r\nimport { ProductWithId } from \"../../../data/shared\";\r\n\r\ninterface AddFormProps {\r\n  setAddOpened: (val: boolean) => void;\r\n  products: ProductWithId[];\r\n  setProducts: (product: ProductWithId[]) => void;\r\n  setError: (message: string) => void;\r\n}\r\n\r\nexport function AddForm({ setAddOpened, products, setProducts, setError }: AddFormProps) {\r\n  const [available, setAvailable] = useState(true);\r\n  const [image, setImage] = useState(\"\");\r\n  const nameInput: React.MutableRefObject<null | HTMLInputElement> = useRef(null);\r\n  const priceInput: React.MutableRefObject<null | HTMLInputElement> = useRef(null);\r\n  const { t } = useTranslation();\r\n\r\n  async function addProduct(): Promise<void> {\r\n    const item_name = nameInput!.current!.value;\r\n    const price = parseInt(priceInput!.current!.value);\r\n    const is_available = available;\r\n    const picture = image;\r\n\r\n    if (!item_name || !picture) {\r\n      setError(t(\"error.fields\"));\r\n      return;\r\n    }\r\n    if (!price) {\r\n      setError(t(\"error.price\"));\r\n      return;\r\n    }\r\n\r\n    const newProduct = await add({ item_name, price, is_available, picture });\r\n\r\n    if (!newProduct) return;\r\n    setProducts([...products, newProduct]);\r\n    setAddOpened(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"add__form\">\r\n      <div className=\"form-field form__name\">\r\n        <span className=\"form-field__title\">{t(\"product.name\")}</span>\r\n        <input ref={nameInput} className=\"form-field__input\" />\r\n      </div>\r\n\r\n      <div className=\"form-field form__price\">\r\n        <span className=\"form-field__title\">{t(\"product.price\")}</span>\r\n        <input ref={priceInput} className=\"form-field__input\" />\r\n      </div>\r\n\r\n      <StatusCheckbox available={available} setAvailable={setAvailable} />\r\n\r\n      <div className=\"form__buttons\">\r\n        <button className=\"form__btn form__btn_solid\" onClick={addProduct}>\r\n          {t(\"add\")}\r\n        </button>\r\n        <button className=\"form__btn form__btn_transparent\" onClick={() => setAddOpened(false)}>\r\n          {t(\"cancel\")}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"form__image\">\r\n        <ImageInput setImage={setImage} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport \"./Auth.css\";\r\nimport { login } from \"../../../middleware\";\r\nimport {config } from \"../../../config\";\r\n\r\ninterface AuthProps {\r\n  setToken: (token: string) => void;\r\n  setError: (message: string) => void;\r\n}\r\n\r\nexport function Auth({ setToken, setError }: AuthProps) {\r\n  const loginInput: React.MutableRefObject<null | HTMLInputElement> = useRef(null);\r\n  const passwordInput: React.MutableRefObject<null | HTMLInputElement> = useRef(null);\r\n  const history = useHistory();\r\n  const { t } = useTranslation();\r\n\r\n  async function onAuth(): Promise<void> {\r\n    const username = loginInput!.current!.value;\r\n    const password = passwordInput!.current!.value;\r\n    if (!login) return;\r\n\r\n    const token = await login(username, password);\r\n\r\n    if (!token) {\r\n      setError(\"Wrong login or password\");\r\n      return;\r\n    }\r\n    document.cookie = `token=${token}; max-age=${config.login_time * 60}`;\r\n    setToken(token);\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <input\r\n        ref={loginInput}\r\n        id=\"login\"\r\n        className=\"auth__input\"\r\n        placeholder={t(\"auth.login\")}\r\n        autoFocus={true}\r\n      />\r\n      <input\r\n        ref={passwordInput}\r\n        id=\"password\"\r\n        type=\"password\"\r\n        className=\"auth__input\"\r\n        placeholder={t(\"auth.password\")}\r\n      />\r\n\r\n      <div className=\"auth__buttons\">\r\n        <button className=\"auth__button auth__button_solid\" onClick={onAuth}>\r\n          {t(\"auth.log_in\")}\r\n        </button>\r\n        <button className=\"auth__button auth__button_transparent\" onClick={() => history.push(\"/\")}>\r\n          {t(\"cancel\")}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport \"./Admin.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Search } from \"../Search/Search\";\r\nimport { AdminProduct } from \"./Product/AdminProduct\";\r\nimport { AddForm } from \"./AddForm/AddForm\";\r\nimport { Auth } from \"./Auth/Auth\";\r\nimport { ProductWithId } from \"../../data/shared\";\r\n\r\ninterface AdminProps {\r\n  token: string;\r\n  setToken: (token: string) => void;\r\n  products: ProductWithId[];\r\n  setProducts: (list: ProductWithId[]) => void;\r\n  setError: (message: string) => void;\r\n}\r\n\r\nexport function Admin({ token, setToken, products, setProducts, setError }: AdminProps) {\r\n  let [addOpened, setAddOpened] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const { t } = useTranslation();\r\n\r\n  function onSearchInput(value: string): void {\r\n    const croppedValue = value.trim().toLowerCase();\r\n    setSearch(croppedValue);\r\n  }\r\n\r\n  if (!token) {\r\n    return <Auth setToken={setToken} setError={setError} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin\">\r\n      <div className={`admin__header ${addOpened ? \"admin__header_blocked\" : \"\"}`}>\r\n        <button className=\"admin__header-add\" onClick={() => setAddOpened(true)}>\r\n          {t(\"add_product\")}\r\n        </button>\r\n        <Search inputEmitter={onSearchInput} />\r\n      </div>\r\n\r\n      <div className={`admin__add ${addOpened && \"admin__add_open\"}`}>\r\n        <AddForm\r\n          setAddOpened={setAddOpened}\r\n          products={products}\r\n          setProducts={setProducts}\r\n          setError={setError}\r\n        />\r\n      </div>\r\n\r\n      <ul className={`admin__list ${addOpened ? \"admin__list_blocked\" : \"\"}`}>\r\n        {products\r\n          .filter(\r\n            item =>\r\n              item.item_name.toLowerCase().includes(search) || item.id.toString().includes(search),\r\n          )\r\n          .map((item, i) => (\r\n            <li className=\"admin__product\" key={i}>\r\n              <AdminProduct\r\n                id={item.id}\r\n                price={item.price}\r\n                is_available={item.is_available}\r\n                item_name={item.item_name}\r\n                picture={item.picture}\r\n                products={products}\r\n                setProducts={setProducts}\r\n                idx={i}\r\n                setError={setError}\r\n              />\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faMinusSquare, faPlusSquare } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { ProductWithId } from \"../../../data/shared\";\r\nimport \"./CartProduct.css\";\r\n\r\ninterface CartProductProps extends ProductWithId {\r\n  amount: number;\r\n  changeCart: (id: number, add: boolean) => void;\r\n}\r\n\r\nexport function CartProduct({\r\n  item_name,\r\n  price,\r\n  id,\r\n  picture,\r\n  amount,\r\n  changeCart,\r\n}: CartProductProps) {\r\n  return (\r\n    <div className=\"cart-product\">\r\n      <img className=\"cart-product__img\" alt=\"\" src={picture} />\r\n      <div className=\"cart-product__name\">{item_name}</div>\r\n      <div className=\"cart-product__price\">{price} ₽</div>\r\n      <div className=\"cart-product__control\">\r\n        <button\r\n          className=\"cart-product__btn cart-product__btn_red\"\r\n          onClick={() => changeCart(id, false)}\r\n        >\r\n          <FontAwesomeIcon icon={faMinusSquare} />\r\n        </button>\r\n        <div className=\"cart-product__amount\">{amount}</div>\r\n        <button\r\n          className=\"cart-product__btn cart-product__btn_green\"\r\n          onClick={() => changeCart(id, true)}\r\n        >\r\n          <FontAwesomeIcon icon={faPlusSquare} />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport \"./Cart.css\";\r\nimport { CartType, ProductWithId } from \"../../data/shared\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { CartProduct } from \"./Product/CartProduct\";\r\nimport { config } from \"../../config\";\r\n\r\ninterface CartProps {\r\n  cartList: CartType;\r\n  products: ProductWithId[];\r\n  setCartList: React.Dispatch<React.SetStateAction<CartType>>;\r\n  cartCount: number;\r\n  setCartCount: React.Dispatch<React.SetStateAction<number>>;\r\n}\r\n\r\nexport function Cart({ cartList, products, setCartList, cartCount, setCartCount }: CartProps) {\r\n  function changeCart(id: number, add: boolean): void {\r\n    if (add) {\r\n      cartList[id] += 1;\r\n    } else if (cartList[id] === 1) {\r\n      delete cartList[id];\r\n    } else {\r\n      cartList[id] -= 1;\r\n    }\r\n    document.cookie = `cart=${JSON.stringify(cartList)}; max-age=${config.login_time * 60 * 60}`;\r\n    setCartList(cartList);\r\n    setCartCount(add ? ++cartCount : --cartCount);\r\n  }\r\n\r\n  const cartProducts = products.filter(item => Object.keys(cartList).includes(item.id.toString()));\r\n\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <p className=\"cart__title\">\r\n        <FontAwesomeIcon icon={faShoppingCart} />\r\n        &nbsp;&nbsp;{t(\"cart\")}\r\n      </p>\r\n\r\n      <ul className=\"cart__list\">\r\n        {cartProducts.map((item, i) => (\r\n          <li className=\"cart__item\" key={i}>\r\n            <CartProduct\r\n              id={item.id}\r\n              item_name={item.item_name}\r\n              picture={item.picture}\r\n              amount={cartList[item.id]}\r\n              price={item.price}\r\n              is_available={item.is_available}\r\n              changeCart={changeCart}\r\n            />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <p className=\"cart__sum\">\r\n        <span className=\"cart__sum_light\">{t(\"sum\")}: </span>\r\n        {cartProducts.reduce((prev, curr) => {\r\n          const currProduct = products.find(item => item.id === curr.id);\r\n          if (!currProduct) return prev;\r\n          return prev + currProduct.price * cartList[curr.id];\r\n        }, 0)}{\" \"}\r\n        ₽\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import React, { ChangeEvent } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {  useTranslation } from \"react-i18next\";\r\nimport \"./Header.css\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { config } from \"../../config\";\r\n\r\ninterface HeaderProps {\r\n  authToken: string;\r\n  setToken: React.Dispatch<React.SetStateAction<string>>;\r\n  cartCount: number;\r\n}\r\n\r\nexport function Header({ authToken, setToken, cartCount }: HeaderProps) {\r\n  const history = useHistory();\r\n  const { i18n, t } = useTranslation();\r\n  const { languages } = config;\r\n\r\n  function logout() {\r\n    document.cookie = \"token=; max-age=-1\";\r\n    setToken(\"\");\r\n  }\r\n\r\n  async function changeLang(e: ChangeEvent): Promise<void> {\r\n    //@ts-ignore\r\n    const lang = e.nativeEvent.target.value;\r\n    await i18n.changeLanguage(lang);\r\n    document.cookie = `i18n=${lang};`;\r\n  }\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <button className=\"header__name\" onClick={() => history.push(\"/\")}>\r\n        {config.name}\r\n      </button>\r\n\r\n      <button className={`header__btn ${!authToken && \"header__btn_hidden\"}`} onClick={logout}>\r\n        {t(\"auth.log_out\")}\r\n      </button>\r\n      <button className=\"header__btn\" onClick={() => history.push(\"/admin\")}>\r\n        {t(\"auth.admin\")}\r\n      </button>\r\n\r\n      <button className=\"header__cart\" onClick={() => history.push(\"/cart\")}>\r\n        {cartCount || \"\"}&nbsp;&nbsp;\r\n        <FontAwesomeIcon icon={faShoppingCart} />\r\n      </button>\r\n\r\n      <select className=\"header__lang\" onChange={changeLang} defaultValue={i18n.language}>\r\n        {languages.map((lang) => (\r\n          <option\r\n            value={lang.key}\r\n            key={lang.key}\r\n          >\r\n            {lang.name}\r\n          </option>\r\n          ))}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Loader.css\";\r\n\r\nexport function Loader() {\r\n  return (\r\n    <div className=\"loader\">\r\n      <div className=\"loader__container\">\r\n        <svg viewBox=\"0 0 36 36\" className=\"loader__bar\">\r\n          <circle\r\n            className=\"loader__segment\"\r\n            cx=\"18\"\r\n            cy=\"18\"\r\n            r=\"15.91549430918954\"\r\n            strokeWidth=\"4\"\r\n            fill='transparent'\r\n            strokeDasharray=\"80 20\" />\r\n        </svg>\r\n        <div className=\"loader__title\">Connecting...</div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\nimport \"./Error.css\";\r\n\r\ninterface ErrorProps {\r\n  message: string;\r\n  show: boolean;\r\n  setError: (arg: string) => void;\r\n}\r\n\r\nexport function Error({ message, show, setError }: ErrorProps) {\r\n  return (\r\n    <div className={`error ${show && \"error_show\"}`}>\r\n      <div className=\"error__container\">\r\n        <div className=\"error__message\">{ message }</div>\r\n        <button className=\"error__button\" onClick={() => setError(\"\")}>OK</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport \"./App.css\";\r\nimport { Admin, MainPage, Cart, Header, Loader } from \"./components\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { CartType, ProductWithId } from \"./data/shared\";\r\nimport { loadProducts } from \"./middleware\";\r\nimport { Error } from \"./components/Error/Error\";\r\n\r\nfunction App() {\r\n  const [authToken, setToken] = useState(getToken());\r\n\r\n  const { count, cartData } = getCart();\r\n  const [cartList, setCartList] = useState(cartData);\r\n  const [cartCount, setCartCount] = useState(count);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  let [products, setProducts] = useState([] as ProductWithId[]);\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (loaded) return;\r\n    loadProducts().then(data => {\r\n      setLoaded(true);\r\n      setProducts(data);\r\n    });\r\n  });\r\n\r\n  function getToken() {\r\n    const tokenExpr = document.cookie.match(/token=[a-zA-Z0-9]+;?/);\r\n    if (!tokenExpr) return \"\";\r\n    return tokenExpr[0].slice(6);\r\n  }\r\n\r\n  function getCart(): {\r\n    count: number;\r\n    cartData: CartType;\r\n  } {\r\n    const data = document.cookie.match(/cart=[{\"0-9:, ]*}/);\r\n    if (!data)\r\n      return {\r\n        count: 0,\r\n        cartData: {},\r\n      };\r\n    const parsedData = JSON.parse(data[0].slice(5)) as CartType;\r\n    return {\r\n      count: Object.values(parsedData).reduce((prev, curr) => prev + curr, 0),\r\n      cartData: parsedData,\r\n    };\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {!loaded && <Loader />}\r\n\r\n      <Header authToken={authToken} setToken={setToken} cartCount={cartCount} />\r\n\r\n      <Error message={error} show={!!error} setError={setError} />\r\n\r\n      <div className=\"content\">\r\n        <Switch>\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            render={() => (\r\n              <MainPage\r\n                cart={cartList}\r\n                setCart={setCartList}\r\n                cartCount={cartCount}\r\n                setCartCount={setCartCount}\r\n                products={products}\r\n                setProducts={setProducts}\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/admin\"\r\n            render={() => (\r\n              <Admin\r\n                token={authToken}\r\n                setToken={setToken}\r\n                products={products}\r\n                setProducts={setProducts}\r\n                setError={setError}\r\n              />\r\n            )}\r\n          />\r\n          <Route\r\n            exact\r\n            path=\"/cart\"\r\n            render={() => (\r\n              <Cart\r\n                cartList={cartList}\r\n                products={products}\r\n                setCartList={setCartList}\r\n                cartCount={cartCount}\r\n                setCartCount={setCartCount}\r\n              />\r\n            )}\r\n          />\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport ru from \"./locales/ru.json\";\r\nimport en from \"./locales/en.json\";\r\n\r\nconst resources = {\r\n  en: {\r\n    translation: en,\r\n  },\r\n  ru: {\r\n    translation: ru,\r\n  },\r\n};\r\n\r\ntype Language = \"en\" | \"ru\";\r\n\r\nfunction getCurrentLanguage(): Language {\r\n  const cookieLang = document.cookie.match(/i18n=(en|ru);?/);\r\n  if (!cookieLang) {\r\n    const navLang = navigator.language.split(/[-_]/)[0];\r\n    return navLang === \"ru\" || navLang === \"en\" ? navLang : \"en\";\r\n  }\r\n  return cookieLang[1] as Language;\r\n}\r\n\r\ni18n.use(initReactI18next).init({\r\n  resources,\r\n  lng: getCurrentLanguage(),\r\n  keySeparator: \".\",\r\n});\r\n\r\nexport default i18n;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport \"./i18n\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}